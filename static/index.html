<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Sentient V0.2.0 UI</title>
  
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;700&family=Inter:wght@400;500;700;800;900&family=Major+Mono+Display&family=Playfair+Display:wght@400;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    // Mapeo de variables CSS a tokens de color para clases como bg-[var(--brand)]
                    'var-brand': 'var(--brand)',
                    'var-bg-main': 'var(--bg-main)',
                    'var-bg-panel': 'var(--bg-panel)',
                    'var-border': 'var(--border)',
                    'var-text': 'var(--text)',
                    'var-text-dim': 'var(--text-dim)',
                },
                borderRadius: {
                    'xl': 'var(--radius-md)', // Mapeo de var(--radius-md)
                },
                spacing: {
                    '60px': '60px', // Header height
                }
            }
        }
    }
  </script>

  <link rel="stylesheet" type="text/css" href="style.css">
  
  <style>
    :root { 
        --radius-md: 12px; 
        --font-headline: 'Inter', sans-serif; 
        --font-headline-weight: 800; 
        --font-card-body: 'Inter', sans-serif;
        
        /* ENFORZAR FONDOS OSCUROS/NEGROS */
        --bg-main: #000000; /* Fondo principal negro puro */
        --bg-panel: #0a0a0a; /* Fondo del panel (cercano a negro para contraste) */
        --border: #1a1a1a; 
        --text: #ffffff;
        --text-dim: #9ca3af;
        
        /* NEON MOCKUP COLORS */
        --neon-color: #ccff00;
        --bg-color: #000000;
        --element-height: 20px; 
        
        /* NEW: Valor RGB asumido para el glow del input (Inicial, se actualiza por JS) */
        --brand-rgb: 204, 255, 0; 
    }
    
    /* Media Query Responsiva adaptada a Tailwind (usando clases `lg:` en HTML) */
    @media (max-width: 1024px) { 
        .sidebar { position: absolute; height: 100%; transform: translateX(-100%); box-shadow: 10px 0 30px rgba(0,0,0,0.5); } 
        .sidebar.open { transform: translateX(0); } 
    }

    /* --- ESTILOS DE COMPONENTES ÃšNICOS (Mantenidos) --- */
    
    .mockup { 
        cursor: pointer; 
        max-height: 95%; 
        width: auto; 
        min-width: 320px; 
        background: #000; 
        border: none;
        border-radius: 20px; 
        overflow: hidden; 
        box-shadow: 0 30px 60px -20px rgba(0,0,0,0.6);
        display: flex; 
        flex-direction: column; 
    }
    
    .canvas-wrapper { aspect-ratio: 4/5; width: auto; height: auto; flex: 1; overflow: hidden; position: relative; display: flex; align-items: center; justify-content: center; background: #111; }
    .render-target { width: 1080px; height: 1350px; position: absolute; flex-shrink: 0; background: var(--bg-main); transform-origin: center center; will-change: transform; }
    .card-bg { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; transition: filter 0.3s ease; }
    .card-overlay { position: absolute; inset: 0; transition: background 0.3s; }
    
    /* Neon Controls: Estructura interna */
    .neon-box {
        background-color: var(--neon-color);
        height: var(--element-height);
        border-radius: 3px; 
        display: flex;
        align-items: center;
        padding: 0 4px 0 6px; 
        box-sizing: border-box;
        color: black;
        user-select: none;
        flex: 1;
    }
    .selector {
        cursor: pointer;
        min-width: 100px; 
        justify-content: space-between;
        font-family: var(--font-headline);
    }
    .selector-label {
        font-size: 10px;
        letter-spacing: 0.5px;
        font-weight: 900;
    }
    .value-badge {
        background-color: black;
        color: var(--neon-color);
        width: 15px; 
        height: 15px;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 3px;
        font-size: 10px; 
        margin-left: 4px;
    }
    .url-input {
        flex: 1; 
        width: 100%;
        height: 16px; 
        background-color: black;
        border: none;
        border-radius: 3px;
        color: var(--neon-color);
        font-family: 'Share Tech Mono', monospace;
        padding: 0 5px;
        font-size: 9px; 
        outline: none;
    }
    .url-input::placeholder {
        color: var(--neon-color);
        opacity: 0.7;
    }
    .slider-icon {
        width: 12px; 
        height: 12px;
        fill: black; 
        flex-shrink: 0;
    }
    input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
    input[type=range]:focus { outline: none; }
    input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 1px; cursor: pointer; background: black; border-radius: 0.5px; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; border: 1px solid black; height: 12px; width: 5px; border-radius: 1px; background: var(--neon-color); cursor: pointer; margin-top: -6px; }
    .neon-upload-icon-btn { 
        width: 20px; 
        height: 20px; 
        background: black;
        color: var(--neon-color);
        border-radius: 3px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        flex-shrink: 0;
    }
    .neon-upload-icon-btn i {
        width: 10px; 
        height: 10px;
        stroke: var(--neon-color); 
        stroke-width: 3;
    }
  </style>
</head>
<body class="bg-[var(--bg-main)] text-[var(--text)] font-sans">
    <div class="app-container">
        <div class="loading-bar fixed top-0 left-0 right-0 h-1 bg-[var(--bg-panel)] z-[9999] overflow-hidden hidden" id="loadingBar"></div>
        <button id="mobileToggle" class="lg:hidden fixed top-5 left-5 z-[30] bg-[var(--bg-panel)] border border-[var(--border)] rounded-lg p-2 text-[var(--brand)] cursor-pointer"><i data-lucide="menu"></i></button>
        
        <aside class="sidebar w-[400px] min-w-[350px] bg-[var(--bg-panel)] flex flex-col z-20 transition-transform duration-300 ease-in-out" id="mainSidebar">
            <header class="h-[60px] px-6 border-b border-[var(--border)] flex items-center justify-between">
                <div class="text-[var(--brand)] font-black tracking-tighter flex gap-2 items-center text-lg"><i data-lucide="zap"></i> SENTIENT V0.2.0</div>
                <select id="themeSelector" class="w-auto p-2 text-sm bg-black/30 border border-[var(--border)] rounded-xl outline-none transition-colors duration-200 focus:border-[var(--brand)] focus:bg-black/50 font-inherit text-inherit"></select>
            </header>
            
            <div class="scroll-area flex-1 overflow-y-auto p-6 flex flex-col gap-7">
                
                <div class="p-4 bg-black/50 rounded-xl shadow-inner border border-[var(--border)]">
                    <span class="text-xs font-bold uppercase tracking-wider text-[var(--text-dim)] mb-2 block">1. SOURCE & CREATE</span>
                    <div class="flex space-x-2">
                        <input id="urlInput" type="url" class="input-field flex-1" placeholder="Paste article URL..." />
                        <button id="scrapeBtn" class="cursor-pointer border-none flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 text-sm w-[60px] bg-[var(--brand)] text-[var(--bg-main)] hover:opacity-90 active:scale-[0.98]"><i data-lucide="sparkles"></i></button>
                    </div>
                </div>
                
                <div id="editorPanel" class="hidden flex-col gap-7">
                    <hr class="border-t border-[var(--border)] opacity-30">
                    
                    <div class="p-4 bg-black/50 rounded-xl shadow-inner border border-[var(--border)]">
                        <span class="text-xs font-bold uppercase tracking-wider text-[var(--text-dim)] mb-2 block">2. TEXT (ACTIVE CARD)</span>
                        <textarea id="titleInput" class="input-field w-full hidden" placeholder="HEADLINE"></textarea>
                        <div id="subtitle-control-group">
                            <textarea id="subInput" class="input-field w-full hidden" placeholder="Subtitle..."></textarea>
                        </div>
                        <p class="text-[var(--text-dim)] text-sm text-center py-2 border-t border-[var(--border)]/50 mt-2 pt-2">
                            Edit text directly on the active card preview.
                        </p>
                    </div>

                    <div class="p-4 bg-black/50 rounded-xl shadow-inner border border-[var(--border)]">
                        <div id="caption-control-group">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold uppercase tracking-wider text-[var(--text-dim)] m-0">3. CAPTION & EXPORT</span>
                                <button id="copyBtn" class="cursor-pointer border-none flex items-center justify-center gap-2 font-bold rounded-xl transition-all duration-200 text-xs h-6 px-3 bg-[var(--brand)] text-[var(--bg-main)] hover:opacity-90 active:scale-[0.98]">COPY</button>
                            </div>
                            <div id="captionPreview" class="input-field max-h-[150px] overflow-y-auto text-sm leading-relaxed whitespace-pre-wrap text-[var(--text-dim)]"></div>
                        </div>
                        
                        <button id="dlBtn" class="cursor-pointer border-none flex items-center justify-center gap-2 font-black rounded-xl transition-all duration-200 text-sm h-12 w-full bg-[var(--brand)] text-[var(--bg-main)] mt-5 hover:opacity-90 active:scale-[0.98]"><i data-lucide="download"></i> EXPORT CLEAN HD</button>
                    </div>
                </div>
            </div>
        </aside>
        
        <main class="flex-1 bg-[var(--bg-main)] flex flex-col items-center justify-center p-5 overflow-hidden relative" onclick="if(window.innerWidth<=1024) document.getElementById('mainSidebar').classList.remove('open')">
            
            <div class="stage-grid flex gap-[25px] w-full h-full items-center justify-center transition-all duration-300 ease-in-out lg:flex-row flex-col lg:overflow-hidden overflow-y-auto lg:p-0 py-[50px] lg:gap-[25px] gap-[40px]">
                
                <div id="mockA" class="mockup active-stage lg:min-h-0 lg:w-auto lg:max-w-none w-full max-w-[450px]" onclick="App.switchVar('A')"><div class="insta-header h-[54px] flex items-center px-4 border-b border-[#1a1a1a] flex-shrink-0 bg-black"><div class="insta-avatar w-8 h-8 rounded-full mr-3"><div></div></div><span class="text-sm font-semibold text-white flex-1">sentient</span><i data-lucide="more-horizontal" class="insta-icon text-white stroke-[1.5px] w-6 h-6 card-options-btn" onclick="event.stopPropagation(); App.switchVar('A');"></i></div><div class="canvas-wrapper" id="mountA"><div id="cardA" class="render-target"><img class="card-bg" crossorigin="anonymous" /><div class="card-overlay"></div><div class="card-content layout-standard"><div class="c-pill">NEWS</div><h1 class="c-title is-placeholder" contenteditable="true" oninput="App.updateTextFromCard(this, 'title')" onfocus="App.handleFocus(this, 'title')" onblur="App.handleBlur(this, 'title')">READY</h1><h2 class="c-subtitle is-placeholder" contenteditable="true" oninput="App.updateTextFromCard(this, 'subtitle')" onfocus="App.handleFocus(this, 'subtitle')" onblur="App.handleBlur(this, 'subtitle')">Paste an article URL...</h2></div></div></div><div class="insta-footer p-3 bg-black flex-shrink-0"><div class="flex gap-4 mb-3"><i data-lucide="heart" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="message-circle" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="send" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="bookmark" class="insta-icon text-white stroke-[1.5px] w-6 h-6 ml-auto"></i></div><div class="font-semibold text-sm">8,432 likes</div></div></div>
                
                <div id="mockB" class="mockup inactive lg:min-h-0 lg:w-auto lg:max-w-none w-full max-w-[450px]" onclick="App.switchVar('B')"><div class="insta-header h-[54px] flex items-center px-4 border-b border-[#1a1a1a] flex-shrink-0 bg-black"><div class="insta-avatar w-8 h-8 rounded-full mr-3"><div></div></div><span class="text-sm font-semibold text-white flex-1">sentient</span><i data-lucide="more-horizontal" class="insta-icon text-white stroke-[1.5px] w-6 h-6 card-options-btn" onclick="event.stopPropagation(); App.switchVar('B');"></i></div><div class="canvas-wrapper" id="mountB"><div id="cardB" class="render-target"><img class="card-bg" crossorigin="anonymous" /><div class="card-overlay"></div><div class="card-content layout-centered"><div class="c-pill">STORY</div><h1 class="c-title is-placeholder" contenteditable="true" oninput="App.updateTextFromCard(this, 'title')" onfocus="App.handleFocus(this, 'title')" onblur="App.handleBlur(this, 'title')">SET</h1><h2 class="c-subtitle is-placeholder" contenteditable="true" oninput="App.updateTextFromCard(this, 'subtitle')" onfocus="App.handleFocus(this, 'subtitle')" onblur="App.handleBlur(this, 'subtitle')">Choose variant...</h2></div></div></div><div class="insta-footer p-3 bg-black flex-shrink-0"><div class="flex gap-4 mb-3"><i data-lucide="heart" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="message-circle" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="send" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="bookmark" class="insta-icon text-white stroke-[1.5px] w-6 h-6 ml-auto"></i></div><div class="font-semibold text-sm">12,901 likes</div></div></div>
                
                <div id="mockC" class="mockup inactive lg:min-h-0 lg:w-auto lg:max-w-none w-full max-w-[450px]" onclick="App.switchVar('C')"><div class="insta-header h-[54px] flex items-center px-4 border-b border-[#1a1a1a] flex-shrink-0 bg-black"><div class="insta-avatar w-8 h-8 rounded-full mr-3" style="background: linear-gradient(45deg, #CCFF00, #00ff99);"><div></div></div><span class="text-sm font-semibold text-white flex-1">sentient</span><i data-lucide="more-horizontal" class="insta-icon text-white stroke-[1.5px] w-6 h-6 card-options-btn" onclick="event.stopPropagation(); App.switchVar('C');"></i></div><div class="canvas-wrapper" id="mountC"><div id="cardC" class="render-target"><img class="card-bg" crossorigin="anonymous" /><div class="card-overlay"></div><div class="card-content layout-bold"><div class="c-pill">BREAKING</div><h1 class="c-title is-placeholder" contenteditable="true" oninput="App.updateTextFromCard(this, 'title')" onfocus="App.handleFocus(this, 'title')" onblur="App.handleBlur(this, 'title')">GO</h1><h2 class="c-subtitle is-placeholder" contenteditable="true" oninput="App.updateTextFromCard(this, 'subtitle')" onfocus="App.handleFocus(this, 'subtitle')" onblur="App.handleBlur(this, 'subtitle')">Customize & export.</h2></div></div></div><div class="insta-footer p-3 bg-black flex-shrink-0"><div class="flex gap-4 mb-3"><i data-lucide="heart" class="insta-icon text-white stroke-[1.5px] w-6 h-6" fill="#ffffff" color="#ffffff"></i><i data-lucide="message-circle" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="send" class="insta-icon text-white stroke-[1.5px] w-6 h-6"></i><i data-lucide="bookmark" class="insta-icon text-white stroke-[1.5px] w-6 h-6 ml-auto"></i></div><div class="font-semibold text-sm">45,200 likes</div></div></div>
            </div>

            <div id="activeControls" class="bg-transparent p-1.5 flex flex-col gap-1.5 font-bold absolute bottom-5 left-1/2 -translate-x-1/2 z-50 w-[95%] max-w-[450px]">
                <div class="flex gap-1.5 items-center">
                    <div class="neon-box selector" id="overlayBtn">
                        <span class="selector-label">OVERLAY</span>
                        <div class="value-badge" id="overlayValue">B</div>
                    </div>
                    <div class="neon-box selector" id="layoutBtn">
                        <span class="selector-label">LAYOUT</span>
                        <div class="value-badge" id="layoutValue">STD</div>
                    </div>
                </div>

                <div class="flex gap-1.5 items-center">
                    <div class="neon-box slider-box flex gap-1 items-center px-1.5">
                         <svg class="slider-icon" viewBox="0 0 24 24">
                            <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                        </svg>
                        <input type="range" id="blurRange" min="0" max="20" value="0" step="1">
                    </div>
                    <div class="neon-box slider-box flex gap-1 items-center px-1.5">
                         <svg class="slider-icon" viewBox="0 0 24 24">
                            <path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"/>
                        </svg>
                        <input type="range" id="contrastRange" min="50" max="150" value="100" step="5">
                    </div>
                </div>
                
                <div class="flex gap-1.5 items-center">
                    <div class="neon-box url-input-container flex flex-1 p-0 px-1 gap-1"> 
                        <input type="text" id="imgUrlInput" class="url-input" placeholder="https://www..." />
                        <div id="imgFileBtn" onclick="document.getElementById('imgFileInput').click()" class="neon-upload-icon-btn">
                            <i data-lucide="upload"></i>
                        </div>
                    </div>
                </div>
                
                <input type="file" id="imgFileInput" hidden accept="image/*" />
            </div>
            </main>
    </div>
    <div id="hd-stage-container">
        <div id="hd-render-card" class="render-target">
             <img class="card-bg" crossorigin="anonymous" /><div class="card-overlay"></div>
             <div class="card-content"><div class="c-pill"></div><h1 class="c-title" contenteditable="true"></h1><h2 class="c-subtitle" contenteditable="true"></h2></div>
        </div>
    </div>

    <div id="fallbackModal" class="hidden fixed inset-0 bg-black/85 z-[10000] items-center justify-center backdrop-blur-md">
        <div class="bg-[var(--bg-panel)] w-[90%] max-w-[500px] rounded-xl border border-[var(--border)] shadow-2xl shadow-black/60 overflow-hidden flex flex-col max-h-[80vh]">
            <div class="p-4 border-b border-[var(--border)] flex justify-between items-center bg-black/20">
                <h3 class="text-[var(--brand)] font-extrabold text-lg flex items-center gap-2"><i data-lucide="search"></i> ALTERNATIVE SOURCES</h3>
                <button onclick="document.getElementById('fallbackModal').style.display='none'" class="bg-none border-none text-[var(--text-dim)] cursor-pointer p-1"><i data-lucide="x"></i></button>
            </div>
            <div class="p-5 overflow-y-auto flex-1">
                <p id="fallbackMsg" class="text-[var(--text-dim)] text-sm mb-4 leading-relaxed">Analyzing link...</p>
                <div id="fallbackList" class="flex flex-col gap-2.5"></div>
            </div>
            <div class="p-4 border-t border-[var(--border)] bg-black/20 flex gap-2.5 items-center">
                <span class="text-xs text-[var(--text-dim)]">Still not finding it?</span>
                <a id="googleFallbackBtn" href="#" target="_blank" class="cursor-pointer border-none flex items-center justify-center gap-1.5 font-semibold rounded-xl transition-all duration-200 text-sm ml-auto bg-[var(--text)] text-[var(--bg-main)] p-2 px-4 no-underline">
                    <i data-lucide="external-link" class="w-4"></i> Open Google Search
                </a>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>